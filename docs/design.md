# Class Design

## generator.js

An encapsulation of Chance.js that servers as an iteration-generator.
Only generate data when data is needed.

### Construction

DataStream(schema, dataLength)
* @param schema - a Schema object (generated by schema.js)
* @param dataLength - the number of documents to generate

### Methods

* numLeft() - @return number of documents not yet generated
* hasMore() - @return boolean of whether there is more data to generate
* emit(step) - similar to next() method of an iterator
  + @param step - max number of data to generate per this request
  + @return an array of documents conforming to the schema
  + @throws TypeError, StopIteration


## schema.js

A representation of schema specified by user that records the name and
the type of random data for each field. The type of random data must be
supported by Chance.js. For example, {user_email: 'email'} means
that the data corresponding to the field 'user_email' is supplied by
chance.email()

Todo's:
* embedded schema, e.g. {user: {id: 'number', user_email: 'email'}}
* complex random data, e.g. {products: 'number-text'} should
  generate things like '3-foo', '234-bar'
* reference relationship between schema, e.g. 'manager_id' in Employee
  collection should correspond to 'id' in Manager collection


## inserter.js

A tool to insert data into MongoDB that adaptively adjusts the timing
and bulk size for each insertion to maximize performance.

### Construction

Inserter(collection, dataStream, callback)
* @param collection - a MongoDB collection to insert the data
* @param dataStream - a DataStream object as specified in generator.js
* @param callback - the function to call when insertion is finished

### Methods

* getUnfinishedData() - @return the DataStream object
* startInsertion() - start the insertion process
* pauseInsertion() - pause
* stopInsertion() - terminate the process, cannot be restarted


## importer.js

Implements a DataStream object that streams data from external sources
